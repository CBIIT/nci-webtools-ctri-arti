{
  "name": "consent_extraction",
  "description": "Extracted consent form variables from a clinical trial protocol.",
  "type": "object",
  "properties": {
    "references": {
      "type": "array",
      "description": "Verbatim quotes from protocol/consent library.",
      "items": { "type": "string" }
    },
    "reasoning": {
      "type": "array",
      "description": "For each complex decision, quote the relevant text and explain reasoning. Format: 'field_name: \"quote\" → reasoning → value chosen'",
      "items": { "type": "string" }
    },
    "pi_name": {
      "type": "string",
      "description": "Principal investigator full name with credentials."
    },
    "study_title": {
      "type": "string",
      "description": "Official study title."
    },
    "study_site": {
      "type": "string",
      "description": "Study site name."
    },
    "cohort": {
      "type": "string",
      "description": "Participant type: 'Affected patient' or 'Healthy volunteer'."
    },
    "consent_version": {
      "type": "string",
      "description": "Date in MM/DD/YYYY format."
    },
    "contact_name": {
      "type": "string",
      "description": "Principal Investigator contact name."
    },
    "contact_phone": {
      "type": "string",
      "description": "Principal investigator contact phone."
    },
    "contact_email": {
      "type": "string",
      "description": "Principal investigator contact email."
    },
    "other_contact_name": {
      "type": "string",
      "description": "Secondary contact name or empty string."
    },
    "other_contact_phone": {
      "type": "string",
      "description": "Secondary contact phone or empty string."
    },
    "other_contact_email": {
      "type": "string",
      "description": "Secondary contact email or empty string."
    },
    "key_info_why_asked": {
      "type": "string",
      "description": "Why participant is being asked to join. 1-2 sentences maximum"
    },
    "key_info_purpose": {
      "type": "string",
      "description": "Study purpose, drug mechanism, tradeoffs. 1-2 sentences maximum."
    },
    "key_info_fda_status": {
      "type": "string",
      "description": "FDA approval status with dosages. 1-2 sentences maximum."
    },
    "key_info_phase": {
      "type": "string",
      "description": "Study phase, e.g., 'Phase I', 'Phase II', 'Pilot/Feasibility', 'Observational'."
    },
    "key_info_phase_explanation": {
      "type": "string",
      "description": "Full phase explanation text. The template renders: 'This is a {{key_info_phase_explanation}}'. Must read naturally after 'This is a'. 1-2 sentences maximum. Empty string if not applicable."
    },
    "key_info_happenings": {
      "type": "string",
      "description": "What will happen in general during the study.  1-3 sentences maximum. See prompt."
    },
    "key_info_benefits": {
      "type": "string",
      "description": "Brief benefits summary.  If there are no benefits, be clear and also describe potential benefits from the protocol. 1-2 sentences maximum."
    },
    "key_info_risks": {
      "type": "string",
      "description": "Brief risks summary. End with reassurance about monitoring. 1-2 sentences maximum"
    },
    "key_info_alternatives": {
      "type": "string",
      "description": "Alternatives summary. 1-2 sentences maximum"
    },
    "key_info_voluntariness": {
      "type": "string",
      "description": "Voluntary participation statement. 1-2 sentences maximum"
    },
    "parent_permission": {
      "type": "boolean",
      "description": "True if minors enrolled."
    },
    "impaired_adults": {
      "type": "boolean",
      "description": "True if impaired adults enrolled."
    },
    "study_purpose": {
      "type": "string",
      "description": "Completes: 'The purpose of this research study is {{study_purpose}}'. Must flow grammatically from 'is'."
    },
    "why_you_asked": {
      "type": "string",
      "description": "Completes: 'We are asking you to join this research study because you {{why_you_asked}}'. Must flow grammatically from 'you'."
    },
    "is_investigational": {
      "type": "boolean",
      "description": "True if drug/approach is investigational. Triggers: '{{approach_investigational_drug_name}} is considered investigational, which means that it has not been approved by the FDA to treat {{investigational_condition}}.'"
    },
    "approach_investigational_drug_name": {
      "type": "string",
      "description": "The drug or approach name from the protocol. MUST be populated whenever is_investigational OR is_fda_approved_off_label is true — the template uses this field in BOTH sections. Capitalize the first letter because the template places this at the start of sentences. Examples: 'Atezolizumab', 'Transcranial magnetic stimulation', 'Vagus nerve stimulation'. MUST be a short name, never a description of a dosing method."
    },
    "investigational_condition": {
      "type": "string",
      "description": "Completes: '...has not been approved by the FDA to treat {{investigational_condition}}'. Short phrase like 'cancer' or 'breast cancer' or 'depression'. Must be grammatically correct after 'to treat'."
    },
    "is_fda_approved_off_label": {
      "type": "boolean",
      "description": "True if drug is FDA-approved for a different indication or use. Triggers: 'The use of {{approach_investigational_drug_name}} is approved to treat {{fda_approved_indication}}. We are testing it in this research study to see {{research_testing_reason}}'"
    },
    "fda_approved_indication": {
      "type": "string",
      "description": "The condition or indication the drug is FDA-approved for. Short phrase completing: 'The use of {{approach_investigational_drug_name}} is approved to treat {{fda_approved_indication}}.' e.g., 'certain types of lung cancer, liver cancer, and melanoma'. Must be a phrase that flows after 'to treat', NOT a full sentence."
    },
    "research_testing_reason": {
      "type": "string",
      "description": "Completes: 'We are testing it in this research study to see {{research_testing_reason}}'. Must flow grammatically from 'to see'."
    },
    "study_procedures_intro": {
      "type": "string",
      "description": "A 2-3 sentence overview of the study for the participant. Describe the main phases (screening, treatment, follow-up), roughly how long each lasts, and the general flow. Write in warm, direct language. This renders before the procedures table in the 'What Will Happen During the Study' section."
    },
    "study_procedures": {
      "type": "array",
      "description": "Each procedure in the study. For procedures with a matching consent library entry, use the library's Procedure text verbatim (filling bracketed placeholders). Each item has a title (procedure name) and description (what happens). Renders as a table in the 'What Will Happen' section.",
      "items": {
        "type": "object",
        "properties": {
          "title": {
            "type": "string",
            "description": "Procedure name, e.g. 'Blood Draws', 'Physical Exam', 'CT Scan'."
          },
          "description": {
            "type": "string",
            "description": "What happens during this procedure. Use consent library text verbatim if available. Description only — NO risks."
          }
        },
        "required": ["title", "description"],
        "additionalProperties": false
      }
    },
    "study_duration": {
      "type": "string",
      "description": "Duration phrase completing: 'If you agree to take part in this study, you will be in it for about {{study_duration}}'. Short phrase like '2 years' or '6 months'. Must flow after 'for about'."
    },
    "accrual_ceiling": {
      "type": "string",
      "description": "Number of participants AT THE NIH SITE ONLY, completing: 'about {{accrual_ceiling}} people take part in this study at the NIH'. Just the number. For multisite studies, this is the NIH-specific enrollment, NOT the overall total. Use multisite_count for the total at other sites."
    },
    "multisite_count": {
      "type": "string",
      "description": "Total participants at NON-NIH sites, completing: 'Up to {{multisite_count}} people might also take part at other study sites.' Just the number, or empty string if single-site. This plus accrual_ceiling should approximate the overall accrual ceiling from the protocol."
    },
    "risks_intro": {
      "type": "string",
      "description": "Standard risks intro. See prompt for structure."
    },
    "drug_risks": {
      "type": "array",
      "description": "Risk profiles per drug.",
      "items": {
        "type": "object",
        "properties": {
          "drug_name": {
            "type": "string",
            "description": "Drug name."
          },
          "common_definition": {
            "type": "string",
            "description": "Frequency definition for common risks."
          },
          "common_risks": {
            "type": "array",
            "description": "Common side effects, grouped.",
            "items": { "type": "string" }
          },
          "occasional_definition": {
            "type": "string",
            "description": "Frequency definition for occasional risks."
          },
          "occasional_risks": {
            "type": "array",
            "description": "Occasional side effects with symptoms.",
            "items": { "type": "string" }
          },
          "rare_definition": {
            "type": "string",
            "description": "Frequency definition for rare risks."
          },
          "rare_risks": {
            "type": "array",
            "description": "Rare side effects with symptoms.",
            "items": { "type": "string" }
          }
        },
        "required": [
          "drug_name",
          "common_definition",
          "common_risks",
          "occasional_definition",
          "occasional_risks",
          "rare_definition",
          "rare_risks"
        ],
        "additionalProperties": false
      }
    },
    "procedure_risks": {
      "type": "array",
      "description": "ONLY the risks for each procedure — do NOT include procedure descriptions (those go in study_procedures). For matching consent library entries, use ONLY the Risks text verbatim. Format: 'Heading: Risks text...' (heading and text on the same line). Renders in the Risks section of the consent form.",
      "items": { "type": "string" }
    },
    "pregnancy_risks": {
      "type": "string",
      "description": "Pregnancy risks section or empty string. Include if the study involves any intervention (drug, device, radiation) that may have a negative or unknown impact on a fetus — use consent library language. Empty string if the protocol has no interventions with reproductive risk."
    },
    "radiation_risks": {
      "type": "string",
      "description": "Radiation risks section or empty string."
    },
    "has_potential_benefits": {
      "type": "boolean",
      "description": "True if the study has therapeutic intent — i.e., the intervention might directly benefit the participant's health condition (e.g., treating their disease, reducing symptoms). Set true for studies testing treatments on affected patients. Set false for healthy volunteer studies, observational studies, biospecimen-only collection, or studies where the intervention provides no direct health benefit. Mutually exclusive with no_potential_benefits — exactly one must be true."
    },
    "no_potential_benefits": {
      "type": "boolean",
      "description": "True for non-therapeutic studies where participation offers no direct health benefit (healthy volunteers, observational studies, biospecimen collection). Mutually exclusive with has_potential_benefits — exactly one must be true."
    },
    "benefits_description": {
      "type": "string",
      "description": "Completes: 'the potential benefit to you might be {{benefits_description}}.' Must flow grammatically from 'might be'. Lead with the potential benefit. If uncertain, use 'that the study drug may help...' rather than hedging language."
    },
    "benefits_others_reason": {
      "type": "string",
      "description": "Completes: 'other people might benefit from this study because {{benefits_others_reason}}.' Must flow from 'because'."
    },
    "alternatives_list": {
      "type": "array",
      "description": "Alternative options. Each item completes a bullet: '• {{$alt}}'. Use empowered 'choose to' language: 'choose to receive standard treatment...' For no-treatment, pair with comfort care: 'choose not to receive treatment at this time and instead receive comfort care to help with symptoms.'",
      "items": { "type": "string" }
    },
    "alternatives_advice": {
      "type": "string",
      "description": "Advice about discussing alternatives, or empty string."
    },
    "return_of_results": {
      "type": "string",
      "description": "How results will be communicated."
    },
    "early_withdrawal": {
      "type": "string",
      "description": "Circumstances for withdrawal. Use conditional 'if' language ('if your disease worsens') rather than direct statements ('your cancer gets worse'). End the section by affirming patient's right to leave at any time."
    },
    "disease_condition": {
      "type": "string",
      "description": "Disease being studied, e.g., 'cancer'."
    },
    "is_open_repository": {
      "type": "boolean",
      "description": "True if shared data/specimens will be in an open-access repository (available to anyone). Template renders: 'The data in the repository will be widely available to anyone who wants it.' Mutually exclusive with is_closed_repository — the template says 'choose one of the following two options.' If the protocol describes data sharing via a repository, exactly one must be true. Look for 'publicly available', 'open access', or 'available to anyone'. If the protocol does not specify access restrictions, default to true (open)."
    },
    "is_closed_repository": {
      "type": "boolean",
      "description": "True if shared data/specimens will be in a controlled-access repository (requires permission). Template renders: 'The data in the repository will only be available to qualified researchers.' Mutually exclusive with is_open_repository. Set true ONLY if the protocol explicitly describes restricted access, permission requirements, or 'qualified researchers'. If the protocol does not specify access restrictions, default to is_open_repository instead."
    },
    "genomic_non_sensitive": {
      "type": "boolean",
      "description": "True if the protocol creates genomic summary results (e.g., whole genome or exome sequencing) AND those results have NOT been deemed sensitive. Only applies to protocols with actual genomic data — if the protocol states 'no genomic data will be acquired' or only does transcriptional/gene expression arrays, set false."
    },
    "genomic_sensitive": {
      "type": "boolean",
      "description": "True if the protocol creates genomic summary results (e.g., whole genome or exome sequencing) AND those results HAVE been deemed sensitive (e.g., due to individual privacy or potential for group harm). If no genomic data is collected, set false."
    },
    "may_anonymize": {
      "type": "boolean",
      "description": "True if specimens/data might be anonymized for future use. For NIH Clinical Center studies, this is almost always true — participant data is available in CRIS (Clinical Research Information System) and therefore BTRIS, which means anonymization is possible. Set false ONLY if the protocol explicitly states that specimens/data will never be anonymized AND will not be available in BTRIS."
    },
    "will_not_anonymize": {
      "type": "boolean",
      "description": "Inverse of may_anonymize. True only when the protocol explicitly states specimens/data will never be anonymized and will not be available in BTRIS. For most NIH Clinical Center studies, this should be false."
    },
    "specimen_storage_duration": {
      "type": "string",
      "description": "Completes: 'Your specimens and data may be stored by the NIH {{specimen_storage_duration}}.' e.g., 'indefinitely' or 'until they are no longer of scientific value'."
    },
    "no_payment": {
      "type": "boolean",
      "description": "True if no payment."
    },
    "has_payment": {
      "type": "boolean",
      "description": "True if payment provided."
    },
    "payment_details": {
      "type": "string",
      "description": "Payment details or empty string."
    },
    "partial_payment_details": {
      "type": "string",
      "description": "Partial payment details or empty string."
    },
    "reimbursement_info": {
      "type": "string",
      "description": "Reimbursement details or empty string."
    },
    "cost_additional": {
      "type": "string",
      "description": "Additional cost info or empty string."
    },
    "coi_no_agreements": {
      "type": "boolean",
      "description": "True ONLY when none of the other COI types apply (no tech license, no CRADA, no CTA). If ANY of coi_tech_license, coi_crada, or coi_cta is true, this MUST be false."
    },
    "coi_tech_license": {
      "type": "boolean",
      "description": "True when NIH or the research team developed the drug/device/agent being studied (i.e., it is an NIH-developed product). Look for language about patents, technology licenses, or payments to NIH from commercialization. Template renders: 'The NIH and the research team for this study have developed [coi_product_description]... This means it is possible that the results of this study could lead to payments to NIH.'"
    },
    "coi_product_description": {
      "type": "string",
      "description": "Generic product type for the COI disclosure. Used in BOTH the tech_license template ('have developed [this field] being used in this study') and the CRADA template ('are using [this field] developed by [company]'). If coi_tech_license or coi_crada is true, this MUST NOT be empty — an empty string creates broken grammar. Use a generic noun phrase like 'a drug', 'a cancer drug', 'an imaging agent', or 'a device'. The specific product name (e.g., 'atezolizumab') goes in coi_product_name, not here. Empty string only if coi_no_agreements or only coi_cta applies."
    },
    "coi_product_name": {
      "type": "string",
      "description": "Specific product name for the tech_license COI disclosure. Template renders: 'You will not receive any money from the development of [this field].' Use the actual drug/device name (e.g., 'atezolizumab'). Required when coi_tech_license is true. Empty string otherwise."
    },
    "coi_crada": {
      "type": "boolean",
      "description": "True when the protocol describes a Cooperative Research and Development Agreement (CRADA) between a company and NIH. Look for the word 'CRADA' in section 11. Template renders: 'The NIH and the research team for this study are using [coi_product_description] developed by [coi_company_name] through a collaboration...' — if true, coi_product_description MUST be filled (e.g., 'a cancer drug called atezolizumab'). Note: CTEP-managed protocols often have boilerplate CRADA text in section 11 even when the primary arrangement is drug supply. If the CRADA section only describes drug supply through CTEP (not a genuine co-development collaboration with shared IP or financial support), set this to false and use coi_cta instead. A true CRADA involves joint research, shared intellectual property, or financial support — not just a company providing drug through a government program."
    },
    "coi_cta": {
      "type": "boolean",
      "description": "True when a company provides the drug/device to NIH, typically under a Clinical Trial Agreement (CTA) or Collaborative Agreement. Look for language like '[Company] is providing [drug] to NIH without charge' or 'provided to the NCI under a Collaborative Agreement' in section 11. Template renders: '[coi_company_name] is providing [coi_product_provision] for this study to NIH without charge...' Note: A protocol can have BOTH a CRADA and a CTA — set both to true if both apply."
    },
    "coi_company_name": {
      "type": "string",
      "description": "COI company name or empty string."
    },
    "coi_product_provision": {
      "type": "string",
      "description": "What the company provides, for the CTA disclosure only. Template renders: '[company] is providing [this field] for this study to NIH without charge.' Use a short phrase like 'the study drug atezolizumab' or 'the study drug and funding support'. IMPORTANT: The template ALREADY includes 'for this study to NIH without charge' after this field — do NOT repeat that phrase in this field value. If coi_cta is true, this MUST NOT be empty — an empty string creates broken grammar. Not used in the CRADA template (CRADA has fixed 'financial support' text). Empty string if coi_cta is false."
    },
    "coi_through_program": {
      "type": "boolean",
      "description": "True if the drug/device is provided through a government program like CTEP, DCTD, etc. Look for phrases like 'provided to the NCI under a Collaborative Agreement... via [program name]'."
    },
    "coi_program_name": {
      "type": "string",
      "description": "Program name (e.g., 'Cancer Therapy Evaluation Program (CTEP)') or empty string. Check section 11 for CRADA/CTA details."
    },
    "sponsor_name": {
      "type": "string",
      "description": "Study sponsor organization name."
    },
    "manufacturer_name": {
      "type": "string",
      "description": "Drug manufacturer name."
    },
    "product_name": {
      "type": "string",
      "description": "Product name for confidentiality section."
    }
  },
  "required": [
    "references",
    "reasoning",
    "pi_name",
    "study_title",
    "study_site",
    "cohort",
    "consent_version",
    "contact_name",
    "contact_phone",
    "contact_email",
    "other_contact_name",
    "other_contact_phone",
    "other_contact_email",
    "key_info_why_asked",
    "key_info_purpose",
    "key_info_fda_status",
    "key_info_phase",
    "key_info_phase_explanation",
    "key_info_happenings",
    "key_info_benefits",
    "key_info_risks",
    "key_info_alternatives",
    "key_info_voluntariness",
    "parent_permission",
    "impaired_adults",
    "study_purpose",
    "why_you_asked",
    "is_investigational",
    "approach_investigational_drug_name",
    "investigational_condition",
    "is_fda_approved_off_label",
    "fda_approved_indication",
    "research_testing_reason",
    "study_procedures_intro",
    "study_procedures",
    "study_duration",
    "accrual_ceiling",
    "multisite_count",
    "risks_intro",
    "drug_risks",
    "procedure_risks",
    "pregnancy_risks",
    "radiation_risks",
    "has_potential_benefits",
    "no_potential_benefits",
    "benefits_description",
    "benefits_others_reason",
    "alternatives_list",
    "alternatives_advice",
    "return_of_results",
    "early_withdrawal",
    "disease_condition",
    "is_open_repository",
    "is_closed_repository",
    "genomic_non_sensitive",
    "genomic_sensitive",
    "may_anonymize",
    "will_not_anonymize",
    "specimen_storage_duration",
    "no_payment",
    "has_payment",
    "payment_details",
    "partial_payment_details",
    "reimbursement_info",
    "cost_additional",
    "coi_no_agreements",
    "coi_tech_license",
    "coi_product_description",
    "coi_product_name",
    "coi_crada",
    "coi_cta",
    "coi_company_name",
    "coi_product_provision",
    "coi_through_program",
    "coi_program_name",
    "sponsor_name",
    "manufacturer_name",
    "product_name"
  ],
  "additionalProperties": false
}
